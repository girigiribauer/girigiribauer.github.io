<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>jQuery から卒業するための第1歩を polyfills から学ぼう – その2 - ばうあーろぐ</title>
  <meta name="description" content="IT / Web に関するメモ、あるいは Twentyfour あるいは人生の diff">
  <meta itemprop="name" content="jQuery から卒業するための第1歩を polyfills から学ぼう – その2">
<meta itemprop="description" content="前回からの続きです。 jQuery から卒業するための第1歩を polyfills から学ぼう https://github.com/inexorabletash/polyfill にある web.js をソースコードリーディングしています。 また、es5.js は予め読み込ま"><meta itemprop="datePublished" content="2014-02-02T15:00:10+00:00" />
<meta itemprop="dateModified" content="2017-09-12T15:00:00+09:00" />
<meta itemprop="wordCount" content="5037"><meta itemprop="image" content="https://girigiribauer.com/img/ogimage.png"/>
<meta itemprop="keywords" content="ajax,JavaScript,jQuery,jsperf,polyfills," />
  <meta property="og:title" content="jQuery から卒業するための第1歩を polyfills から学ぼう – その2" />
<meta property="og:description" content="前回からの続きです。 jQuery から卒業するための第1歩を polyfills から学ぼう https://github.com/inexorabletash/polyfill にある web.js をソースコードリーディングしています。 また、es5.js は予め読み込ま" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://girigiribauer.com/tech/20140203/" /><meta property="og:image" content="https://girigiribauer.com/img/ogimage.png"/><meta property="article:section" content="tech" />
<meta property="article:published_time" content="2014-02-02T15:00:10+00:00" />
<meta property="article:modified_time" content="2017-09-12T15:00:00+09:00" />


  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://girigiribauer.com/img/ogimage.png"/>

<meta name="twitter:title" content="jQuery から卒業するための第1歩を polyfills から学ぼう – その2"/>
<meta name="twitter:description" content="前回からの続きです。 jQuery から卒業するための第1歩を polyfills から学ぼう https://github.com/inexorabletash/polyfill にある web.js をソースコードリーディングしています。 また、es5.js は予め読み込ま"/>

  <link rel="stylesheet" href="/css/style.css" type="text/css" media="all">
  <meta name="theme-color" content="#d9d9d0">
  <meta name="generator" content="Hugo 0.91.2" />
</head>

<body class="theme-tech">
  <div class="container">
    <header class="globalheader"><a href="/" title="TOP へ戻る">TOP</a></header>

    <main class="maincontents" role="main">
      
<h1 class="heading">jQuery から卒業するための第1歩を polyfills から学ぼう – その2</h1>
<div class="poststatus">
  <p class="time">
<time datetime="2014-02-03 00:00:10">2014/02/03</time>
<span class="separator"> | lastmod: </span>
<time datetime="2017-09-12 15:00:00">2017/09/12</time>
</p>
  <p class="expired"><strong>この記事は書かれてから1年以上が経過しており、最新の情報とは異なる可能性があります</strong></p>

  <ul class="tags">
    <li class="section"><a href="/tech/"><i class="icon-book"></i>tech</a></li>
    <li><a href="/tags/ajax/"><i class="icon-tag"></i>ajax</a></li>
    <li><a href="/tags/javascript/"><i class="icon-tag"></i>JavaScript</a></li>
    <li><a href="/tags/jquery/"><i class="icon-tag"></i>jQuery</a></li>
    <li><a href="/tags/jsperf/"><i class="icon-tag"></i>jsperf</a></li>
    <li><a href="/tags/polyfills/"><i class="icon-tag"></i>polyfills</a></li>
  </ul>
</div>

<div class="article">
  <p>前回からの続きです。 <a href="/tech/20140131/">jQuery から卒業するための第1歩を polyfills から学ぼう</a></p>
<p><a href="https://github.com/inexorabletash/polyfill">https://github.com/inexorabletash/polyfill</a> にある web.js をソースコードリーディングしています。 また、es5.js は予め読み込まれている前提となります。</p>
<h2 id="xmlhttprequestxhr">XMLHttpRequest（XHR）</h2>
<p>いわゆる Ajax の核となる API です。</p>
<p><a href="http://ja.wikipedia.org/wiki/XMLHttpRequest">http://ja.wikipedia.org/wiki/XMLHttpRequest</a></p>
<p>例えば、jQuery を用いてファイルを非同期で取得する場合、 以下のように書いた経験があるかもしれません。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>({
  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;POST&#34;</span>,
  <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;some.php&#34;</span>,
  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John&#34;</span>, <span style="color:#a6e22e">location</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Boston&#34;</span> }
})
</code></pre></div><p><a href="http://api.jquery.com/jQuery.ajax/">http://api.jquery.com/jQuery.ajax/</a> の Examples からの引用です。</p>
<p>この <code>$.ajax</code> の内部で使われているのが、<strong>window.XMLHttpRequest</strong> ですね。</p>
<p><code>window.XMLHttpRequest</code> は、IE7 から使えるのですが、IE6 以前では使えはするものの、同じ記述ではできません。</p>
<p>23〜37行目を抜粋します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">//
</span><span style="color:#75715e">// XMLHttpRequest (http://www.w3.org/TR/XMLHttpRequest/)
</span><span style="color:#75715e">//
</span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">XMLHttpRequest</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">XMLHttpRequest</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">function</span> () {
  <span style="color:#75715e">/*global ActiveXObject*/</span>
  <span style="color:#66d9ef">try</span> { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ActiveXObject</span>(<span style="color:#e6db74">&#34;Msxml2.XMLHTTP.6.0&#34;</span>); } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e1</span>) { }
  <span style="color:#66d9ef">try</span> { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ActiveXObject</span>(<span style="color:#e6db74">&#34;Msxml2.XMLHTTP.3.0&#34;</span>); } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e2</span>) { }
  <span style="color:#66d9ef">try</span> { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">ActiveXObject</span>(<span style="color:#e6db74">&#34;Msxml2.XMLHTTP&#34;</span>); } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e3</span>) { }
  <span style="color:#66d9ef">throw</span> Error(<span style="color:#e6db74">&#34;This browser does not support XMLHttpRequest.&#34;</span>);
};
<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">UNSENT</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">OPENED</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">HEADERS_RECEIVED</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">LOADING</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">DONE</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</code></pre></div><p>ActiveX について掘り下げると本質的ではなくなってしまうのであまり触れませんが、IE6 で Ajax を実現するためには、<strong>ActiveXObject</strong> を用います。</p>
<p>try ~ catch を用いて、試しにオブジェクトを作って上手くいけばそれを採用しています。 try 文の中で、すぐに return するように書かれているので、 new ActiveXObject 部分に問題がなければそのまま function の処理が終わります。 （逆に問題があれば “Illegal return statement” などの SyntaxError が起きますが、catch 文でそのままキャッチアンドリリースしちゃってるので、実際何も起きません。）</p>
<p>その後、XMLHttpRequest オブジェクトに対して、 必要な定数（正確には大文字なだけでただの変数ですが、定数として見なして使っています）を 定義しています。</p>
<p>このあたりの話はかなり使い古されており、もうすでに caniuse.com にすら項目として掲載されていないくらい当たり前の手法となっています。詳しくは以下などをご覧ください。</p>
<p><a href="http://ja.wikipedia.org/wiki/XMLHttpRequest#.E5.88.A9.E7.94.A8.E6.B3.95">http://ja.wikipedia.org/wiki/XMLHttpRequest#.E5.88.A9.E7.94.A8.E6.B3.95</a></p>
<p>なお、<strong>XHR</strong> という略は本当によく使うので、 知らなかった人はこれだけは覚えておいた方が良いと思います。 <strong>XHR = XML Http Request</strong> です。</p>
<h2 id="xmlhttprequest-level-2-xhr2">XMLHttpRequest Level 2 (XHR2)</h2>
<p>上記のパワーアップ版です。</p>
<p>先に42行目、73行目を抜粋します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#39;FormData&#39;</span> <span style="color:#66d9ef">in</span> window)) {
}
</code></pre></div><p>外枠は FormData オブジェクトがあるかどうかで判別をしています。この FormData が一体なんなのか？というのを知るのと同時に、XHR2 でざっくり何が出来るようになったのかを調べてみます。</p>
<p><a href="http://caniuse.com/#feat=xhr2">http://caniuse.com/#feat=xhr2</a></p>
<p><img src="resource01.jpg" alt=""></p>
<p>IE10, iOS5.0, Android3.x, 4.x 以降、その他モダンブラウザで使えるようになったものですが、 <strong>ファイルアップロード時の進捗</strong>を取れたり（progress）、<strong>クロスドメインのリクエスト</strong>などが出来るようになりました。</p>
<p>その他にも、フォームに入力された情報を FormData オブジェクトとして XHR オブジェクトにそのまま渡す仕組みも導入されています。以下に詳しく載ってますが、サンプルコードだけ抜粋します。</p>
<p><a href="http://www.html5rocks.com/ja/tutorials/file/xhr2/#toc-send-formdata">http://www.html5rocks.com/ja/tutorials/file/xhr2/#toc-send-formdata</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sendForm</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">formData</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FormData</span>();
  <span style="color:#a6e22e">formData</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;username&#39;</span>, <span style="color:#e6db74">&#39;johndoe&#39;</span>);
  <span style="color:#a6e22e">formData</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#ae81ff">123456</span>);

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xhr</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">XMLHttpRequest</span>();
  <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">open</span>(<span style="color:#e6db74">&#39;POST&#39;</span>, <span style="color:#e6db74">&#39;/server&#39;</span>, <span style="color:#66d9ef">true</span>);
  <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) { ... };

  <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">formData</span>);
}
</code></pre></div><p>最後の <code>xhr.send(formData)</code> で、FormData オブジェクトを引数にして XHR オブジェクトに渡しているのがなんとなく分かると思います。</p>
<p>という感じで、XHR2 の新しい機能みたいなのは大まかには知ることが出来たと思います。</p>
<h3 id="果たしてxhr2-をすべて-polyfills-として提供できるのか">果たして、XHR2 をすべて polyfills として提供できるのか？</h3>
<p>ここまで読んで、**全部は無理じゃね？**と気づかれた方もいるのではないでしょうか。</p>
<p>クロスドメインのリクエストなんかは、IE8 では非標準の <strong>XDomainRequest</strong> を代用して 実現は出来るのですが、IE7 以前でクロスドメインでファイルのリクエストをするのは難しいです。</p>
<p>自分も日々気をつけたいと思っているのですが、polyfills があるから安易に 「クロスブラウザ対応、問題なくできちゃいます！」と判断しちゃうと、 後で痛い目見ることになると思うので注意が必要です。 <strong>実際に読んで把握したり試したりするのがやっぱり大事ですね。</strong></p>
<p>さっきの抜粋だと、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#39;FormData&#39;</span> <span style="color:#66d9ef">in</span> window)) {
}
</code></pre></div><p>FormData オブジェクトがあるかどうかチェックしているため、 FormData オブジェクトに関する polyfills であることが分かります。</p>
<h3 id="即時関数と-jsperf">即時関数と jsperf</h3>
<p>さらにもう内側、43行目、72行目</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">global</span>) {
  <span style="color:#960050;background-color:#1e0010">（</span><span style="color:#a6e22e">中略</span><span style="color:#960050;background-color:#1e0010">）</span>
}(<span style="color:#66d9ef">this</span>));
</code></pre></div><p>このように、function （と丸括弧）で挟んでやることで、 引数を渡してすぐにその引数を受け取って実行することが出来るわけですが**（即時関数）**、 this は元々 global であるため、無くてもちゃんと動きます。</p>
<p>何が違うかというと、function の仮引数である global は、function の中だけで有効なローカル変数となっているので、ローカル変数へのアクセスとなり、window オブジェクトへの頻繁なアクセスを避けた方が効率的であるためです。</p>
<p>・・・なんのことを言っているのか分からない人もいると思うので、実際に動かしてみましょう。</p>
<p><strong>jsperf</strong> というサイトがあって、検証コードをその場で試して動かすことが可能です。なお、js の <strong>perf</strong>ormance の略です。 （jsperf に関しては、余裕があればまた改めて記事として書ければなーと思います。）</p>
<p><a href="http://jsperf.com/writing-to-global-objects">http://jsperf.com/writing-to-global-objects</a></p>
<p><img src="resource02.jpg" alt=""></p>
<p>IE8 にて動作させた結果のキャプチャです。</p>
<p>そのまま global として扱った場合と、一度即時関数内でローカル変数として扱った場合とでは、<strong>IE8 にて約5%のパフォーマンスの差異</strong>が出るようです。（もちろんブラウザによって異なります）</p>
<p>なので、こういった頻繁に window オブジェクトにアクセスするようなものは、 予め即時関数でラッピングしてどうこうする、みたいに書かれることが多いですね。勉強になります。</p>
<h3 id="xhr2-の-formdata-オブジェクトの-polyfills">XHR2 の FormData オブジェクトの polyfills</h3>
<p>大分寄り道しましたが、中身を読んでいきます。 とはいえ、全部紹介してたらきりがないので、ポイントだけ抜粋します。</p>
<p>44〜49行目の抜粋です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">FormData</span>(<span style="color:#a6e22e">form</span>) {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_data</span> <span style="color:#f92672">=</span> [];
  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">form</span>) <span style="color:#66d9ef">return</span>;
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">elements</span>.<span style="color:#a6e22e">length</span>; <span style="color:#f92672">++</span><span style="color:#a6e22e">i</span>)
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">append</span>(<span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">elements</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">elements</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>);
}
</code></pre></div><p>new するための FormData オブジェクトを用意しています。 そもそもの FormData オブジェクトの使い方として、引数に HTMLFormElement を取ることが出来るので、引数が無ければそのまま return、あれば append を呼ぶ、となってます。</p>
<p>続いて51〜55行目です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">FormData</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">append</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">value</span> <span style="color:#75715e">/*, filename */</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#39;Blob&#39;</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">global</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">Blob</span>) <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">TypeError</span>(<span style="color:#e6db74">&#34;Blob not supported&#34;</span>);
  <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> String(<span style="color:#a6e22e">name</span>);
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_data</span>.<span style="color:#a6e22e">push</span>([<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">value</span>]);
};
</code></pre></div><p>後追いでフォームの名前と値を追加できるメソッドを用意しています。XHR2 になって、Blob データも送ることが出来るようになったので、Blob 関連の記述もあります。</p>
<p>63行目です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">FormData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">FormData</span>;
</code></pre></div><p>global のプロパティに紐付けてやることで、即時関数内で定義したものを外からも呼べるようになります。</p>
<p>最後に64〜71行目の抜粋です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">send</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">send</span>;
<span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">XMLHttpRequest</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">send</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">body</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">body</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">FormData</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">setRequestHeader</span>(<span style="color:#e6db74">&#39;Content-Type&#39;</span>, <span style="color:#e6db74">&#39;application/x-www-form-urlencoded&#39;</span>);
    <span style="color:#a6e22e">arguments</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">toString</span>();
  }
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">send</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#66d9ef">this</span>, <span style="color:#a6e22e">arguments</span>);
};
</code></pre></div><p>ここからは、FormData オブジェクトについてではなく、それに関連した既存の XHR オブジェクトの send メソッドの改良についてです。</p>
<p>元々 XHR には send メソッドがあるのですが、新たに FormData も送ることが出来るようになったので、基本の仕組みはそのまま踏襲しつつも、FormData オブジェクトも受け取れるようにしなくてはなりません。</p>
<p>そこで、まず var send = &hellip; として一時的に send 変数に入れておき、 新たに global.XMLHttpRequest.prototype.send として定義して、 FormData オブジェクトだったときの処理を挟みつつ、最後に send.apply で元々の処理を呼んでやるという流れになっています。</p>
<p>・・・とこんな感じで XHR, XHR2 と通信周りを順に読んでみましたが、polyfills を追っていくだけでも色々と勉強になりますね。 いやぁ、けっこう長くなりました。</p>
<h2 id="requestanimationframe">requestAnimationFrame</h2>
<p>お次は requestAnimationFrame です。</p>
<p>HTMLベースのアニメーションは、ほとんどパラパラアニメの仕組みと同じで、 フレームごとに再描画して動いているわけですが、 長らく setTimeout, setInterval などのタイマーを用いてそれが行われていました。</p>
<p>これはもう名前のごとく、アニメーションフレームをリクエストするためのメソッドですね。</p>
<p>詳しい説明はこちらです。</p>
<p><a href="https://developer.mozilla.org/ja/docs/Web/API/window.requestAnimationFrame">https://developer.mozilla.org/ja/docs/Web/API/window.requestAnimationFrame</a></p>
<p>これも元々 setTimeout, setInterval があるので、polyfills として問題なく提供できるはずですね。</p>
<p>流れは XHR とほとんど同じで、即時関数にラッピングして最後に global に紐付けする形です。 requestAnimationFrame が global に紐付けされる前までに、即時関数内だけで使われている処理、94行目から106行目を抜粋します。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onFrameTimer</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cur_requests</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">requests</span>;

  <span style="color:#a6e22e">requests</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#66d9ef">null</span>);
  <span style="color:#a6e22e">timeout_handle</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;

  Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">cur_requests</span>).<span style="color:#a6e22e">forEach</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">id</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">request</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cur_requests</span>[<span style="color:#a6e22e">id</span>];
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">request</span>.<span style="color:#a6e22e">element</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">isVisible</span>(<span style="color:#a6e22e">request</span>.<span style="color:#a6e22e">element</span>)) {
      <span style="color:#a6e22e">request</span>.<span style="color:#a6e22e">callback</span>(Date.<span style="color:#a6e22e">now</span>());
    }
  });
}
</code></pre></div><p>これは毎フレームごとに呼ばれる関数となっています。 request は、function のすぐ上に requests = Object.create(null); という変数で用意されており、function 内にも全く同じ記述がされています。</p>
<h3 id="proto-と-consoledir">proto と console.dir</h3>
<p>じゃあ、この Object.create(null) っていうのは一体何やってるのか？というと、 本当の意味で何もない空のオブジェクトを生成しています。</p>
<p>例えば、今開発者ツールを開いて、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#66d9ef">null</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> {};
<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>; <span style="color:#75715e">// =&gt; ?
</span></code></pre></div><p>と入力してみると、実際 <strong>false</strong> になります。 そういうときは、例えば <strong>console.dir</strong> などを使ってオブジェクトの中身を詳しく見てみると違いが分かると思います。</p>
<p><strong>+++2017/09/12 追記ここから+++</strong></p>
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">&gt;例えば、今開発者ツールを開いて、<br>&gt;var a = Object.create(null);<br>&gt;var b = {};<br>&gt;a === b; // =&gt; ?<br>&gt;と入力してみると、実際 false になります。<br>これでは参照値の比較になってしまうので</p>&mdash; こひな (@37coHiNa) <a href="https://twitter.com/37coHiNa/status/907378036965699585">2017年9月11日</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>でご指摘を受けておっしゃる通りでございます・・・。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> {};
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> {};
<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span> <span style="color:#75715e">// =&gt; ?
</span></code></pre></div><p>そもそもこれでも <strong>false</strong> になりますね。</p>
<p>改めて見直すと、上で <strong>本当の意味で何もない空のオブジェクト</strong> というのが何なのか、
きちんと説明できてないのも良くないですね・・・。</p>
<p><code>var b = {};</code> というのは、空のオブジェクトを生成しているものの、継承しているプロパティが存在しているために、
実際 <code>toString()</code> メソッドやら <code>valueOf()</code> メソッドやらが存在しています。</p>
<p>一方、 <code>var a = Object.create(null)</code> で作った何も継承していないオブジェクトは、何のメソッドも存在してません。</p>
<p>ご指摘の通りそういった継承したものがあるかどうかを比較するなら、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#66d9ef">null</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> {};
Object.<span style="color:#a6e22e">getPrototypeOf</span>(<span style="color:#a6e22e">a</span>)<span style="color:#f92672">===</span>Object.<span style="color:#a6e22e">getPrototypeOf</span>(<span style="color:#a6e22e">b</span>); <span style="color:#75715e">// =&gt; false
</span></code></pre></div><p>と比較すると良いですね。あとは以下に続くように実際に console.dir などでオブジェクトの中身を見て見ると分かりやすいかと思います。</p>
<p><strong>+++2017/09/12 追記ここまで+++</strong></p>
<p><img src="resource03.jpg" alt=""></p>
<p>こちらが Firefox での <code>console.dir</code> の表示結果です。</p>
<p><strong>proto</strong> があるかないかの違いが見られます。</p>
<p><img src="resource04.jpg" alt=""></p>
<p>こちらは Chrome での <code>console.dir</code> の表示結果です。（もちろん結果は同じです）</p>
<p>何らかの key, value を持ったオブジェクトを作り、それを for in などでループして何か処理しようとしても、プロトタイプ継承によって余分なプロパティまでもアクセスできてしまいます。それを防ぐために、for in ループの中に Object.prototype.hasOwnProperty を使って自分自身のプロパティでないものは外す、といった定石は有名ですね。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">buz</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">fog</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;stack&#39;</span>
};

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">buz</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">buz</span>.<span style="color:#a6e22e">hasOwnProperty</span>(<span style="color:#a6e22e">name</span>)) {
    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;this is fog (&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;) for sure. Value: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">buz</span>[<span style="color:#a6e22e">name</span>]);
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// toString or something else
</span><span style="color:#75715e"></span>  }
}
</code></pre></div><p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty">https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty</a> の『例: オブジェクトのプロパティの反復処理』より抜粋</p>
<p>これを実現する別の方法として、何にも継承していない本当に空のオブジェクトを Object.create(null) で作ってやることで、for などでループを回しても継承元がどうこうと考えなくてもよくなります。</p>
<h3 id="requestanimationframe-の残り">requestAnimationFrame の残り</h3>
<p>だいぶ話がそれましたが、Object.keys で cur_requests のキーだけの配列を取得し、それぞれ callback を呼んでいます。</p>
<p>いまいち element が何なのか分からなかったのですが、 （仕様には callback しかなく、第2引数に element を指定するような仕組みはないっぽい・・・）element が無ければ if の中がそのまま実行されるので無視しても良さそうです。</p>
<p>最後に128〜134行目の抜粋です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">requestAnimationFrame</span> <span style="color:#f92672">=</span>
  <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">requestAnimationFrame</span> <span style="color:#f92672">||</span>
  <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">webkitRequestAnimationFrame</span> <span style="color:#f92672">||</span>
  <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">mozRequestAnimationFrame</span> <span style="color:#f92672">||</span>
  <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">oRequestAnimationFrame</span> <span style="color:#f92672">||</span>
  <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">msRequestAnimationFrame</span> <span style="color:#f92672">||</span>
  <span style="color:#a6e22e">requestAnimationFrame</span>;
</code></pre></div><p>他のものと同様に、最後に global に紐付けて即時関数の外からも呼べるようにするのですが、 ブラウザの実装度合いによってベンダープレフィックスがついている場合もあるので、それも考慮した書き方になっています。</p>
<p>論理和ごとに順に使えるかどうかチェックして、使えるものがあればそれ、なければ次のものを見ていき、最終的にどれも使えなければ、今即時関数内に用意している requestAnimationFrame を使う、といった流れです。</p>
<h2 id="setimmediate">setImmediate</h2>
<p>似たような API として、今のところ IE だけが対応している setImmediate というのがあります。</p>
<p>ほぼ requestAnimationFrame と同じでそれよりもシンプルなので、 149〜154行目だけ抜粋しておきます。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setImmediate</span>(<span style="color:#a6e22e">callback</span><span style="color:#75715e">/*, args*/</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">=</span> [].<span style="color:#a6e22e">slice</span>.<span style="color:#a6e22e">call</span>(<span style="color:#a6e22e">arguments</span>, <span style="color:#ae81ff">1</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">global</span>.<span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">callback</span>.<span style="color:#a6e22e">apply</span>(<span style="color:#66d9ef">null</span>, <span style="color:#a6e22e">params</span>);
  }, <span style="color:#ae81ff">0</span>);
}
</code></pre></div><p>同様に setTimeout を用いて実現しています。</p>
<p><code>[].slice.call(arguments, 1)</code> は何をしているかというと、 arguments がその関数内における仮引数のリスト（配列っぽいオブジェクト）に相当するので、 それを実際に配列オブジェクトに用意されている slice メソッドを使って 1つだけ切り出してます。</p>
<p><code>[0, 1, 2].slice(1) // =&gt; [1, 2]</code> このまま使えばこんな感じですが、arguments はあくまで配列っぽいオブジェクトであるため、 slice メソッドなどは持ち合わせてませんので、call を使って実現しています。</p>
<h2 id="まとめ">まとめ</h2>
<p>はーー、思ったよりも進まない・・・。</p>
<p>ソースコードを読むこと自体は、そんなに時間のかかる行為ではないんですが、それをブログに説明として分かりやすく載せるとなると、意外に時間かかっちゃうものですね。</p>
<p>たぶんその4、その5あたりまで行っちゃうかもしれません。</p>
<p>お次は DOM 周りの polyfills です。イベントもいけたらいいな。</p>
<p>追記：<a href="/tech/20140213/">続き書きました。</a></p>

</div>
<ul class="socialbuttons">
  <li>
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja" data-count="vertical">Tweet</a>
    <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
  </li>
  <li>
    <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
    <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </li>
</ul>
<div class="poststatus">
  <p class="time">
<time datetime="2014-02-03 00:00:10">2014/02/03</time>
<span class="separator"> | lastmod: </span>
<time datetime="2017-09-12 15:00:00">2017/09/12</time>
</p>
  <p class="expired"><strong>この記事は書かれてから1年以上が経過しており、最新の情報とは異なる可能性があります</strong></p>

  <ul class="tags">
    <li class="section"><a href="/tech/"><i class="icon-book"></i>tech</a></li>
    <li><a href="/tags/ajax/"><i class="icon-tag"></i>ajax</a></li>
    <li><a href="/tags/javascript/"><i class="icon-tag"></i>JavaScript</a></li>
    <li><a href="/tags/jquery/"><i class="icon-tag"></i>jQuery</a></li>
    <li><a href="/tags/jsperf/"><i class="icon-tag"></i>jsperf</a></li>
    <li><a href="/tags/polyfills/"><i class="icon-tag"></i>polyfills</a></li>
  </ul>
</div>

<small>もし記事内に誤りなどございましたら、 <del><a href="https://twitter.com/girigiribauer" target="_blank">@girigiribauer</a></del> <a href="https://bsky.app/profile/girigiribauer.bsky.social" target="_blank">@girigiribauer.bsky.social</a> までご一報いただけると助かります。</small>



<h2>Related articles</h2>
<ul class="article-list">
  
  <li>
  <h2 class="heading-listitem">
<time datetime="2014-01-31 00:00:53">2014/01/31</time>
 <br> <a href="https://girigiribauer.com/tech/20140131/">jQuery から卒業するための第1歩を polyfills から学ぼう</a></h2>
  <ul class="tags">
    <li class="section"><a href="/tech/"><i class="icon-book"></i>tech</a></li>
    <li><a href="/tags/javascript/"><i class="icon-tag"></i>JavaScript</a></li>
    <li><a href="/tags/jquery/"><i class="icon-tag"></i>jQuery</a></li>
    <li><a href="/tags/polyfills/"><i class="icon-tag"></i>polyfills</a></li>
  </ul>
</li>

  
  <li>
  <h2 class="heading-listitem">
<time datetime="2013-03-01 23:14:23">2013/03/01</time>
 <br> <a href="https://girigiribauer.com/tech/20130301/">大なごやJS vol.5 に行ってきたまとめ</a></h2>
  <ul class="tags">
    <li class="section"><a href="/tech/"><i class="icon-book"></i>tech</a></li>
    <li><a href="/tags/javascript/"><i class="icon-tag"></i>JavaScript</a></li>
    <li><a href="/tags/mvc/"><i class="icon-tag"></i>MVC</a></li>
    <li><a href="/tags/output/"><i class="icon-tag"></i>output</a></li>
    <li><a href="/tags/functionallanguage/"><i class="icon-tag"></i>FunctionalLanguage</a></li>
    <li><a href="/tags/event-conference/"><i class="icon-tag"></i>event-conference</a></li>
  </ul>
</li>

  
  <li>
  <h2 class="heading-listitem">
<time datetime="2013-02-11 20:16:14">2013/02/11</time>
 <br> <a href="https://girigiribauer.com/tech/20130211/">スマートフォンサイト構築に役立ちそうな本を読んでみた</a></h2>
  <ul class="tags">
    <li class="section"><a href="/tech/"><i class="icon-book"></i>tech</a></li>
    <li><a href="/tags/html5/"><i class="icon-tag"></i>HTML5</a></li>
    <li><a href="/tags/javascript/"><i class="icon-tag"></i>JavaScript</a></li>
    <li><a href="/tags/smartphone/"><i class="icon-tag"></i>Smartphone</a></li>
  </ul>
</li>

  
</ul>

    </main>

    <footer class="globalfooter">
      <h2>Tags</h2>
      <ul class="tags">
        <li><a href="https://girigiribauer.com/tags/ajax/"><i class="icon-tag"></i>ajax (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/angular/"><i class="icon-tag"></i>Angular (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/ansible/"><i class="icon-tag"></i>Ansible (5)</a></li>
        <li><a href="https://girigiribauer.com/tags/anyenv/"><i class="icon-tag"></i>anyenv (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/apache/"><i class="icon-tag"></i>Apache (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/api/"><i class="icon-tag"></i>API (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/apps/"><i class="icon-tag"></i>Apps (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/auth/"><i class="icon-tag"></i>auth (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/automation/"><i class="icon-tag"></i>automation (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/bluesky/"><i class="icon-tag"></i>Bluesky (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/bot/"><i class="icon-tag"></i>bot (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/browserextension/"><i class="icon-tag"></i>BrowserExtension (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/bugs/"><i class="icon-tag"></i>bugs (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/canvas/"><i class="icon-tag"></i>Canvas (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/capacitor/"><i class="icon-tag"></i>Capacitor (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/chef/"><i class="icon-tag"></i>Chef (9)</a></li>
        <li><a href="https://girigiribauer.com/tags/cli/"><i class="icon-tag"></i>CLI (13)</a></li>
        <li><a href="https://girigiribauer.com/tags/cordova/"><i class="icon-tag"></i>Cordova (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/crawler/"><i class="icon-tag"></i>Crawler (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/css/"><i class="icon-tag"></i>CSS (4)</a></li>
        <li><a href="https://girigiribauer.com/tags/css3/"><i class="icon-tag"></i>CSS3 (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/cssfilter/"><i class="icon-tag"></i>CSSfilter (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/database/"><i class="icon-tag"></i>Database (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/docker/"><i class="icon-tag"></i>Docker (10)</a></li>
        <li><a href="https://girigiribauer.com/tags/dom/"><i class="icon-tag"></i>DOM (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/ecmascript/"><i class="icon-tag"></i>ECMAScript (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/electron/"><i class="icon-tag"></i>Electron (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/english/"><i class="icon-tag"></i>English (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/event-conference/"><i class="icon-tag"></i>event-conference (4)</a></li>
        <li><a href="https://girigiribauer.com/tags/fab/"><i class="icon-tag"></i>Fab (9)</a></li>
        <li><a href="https://girigiribauer.com/tags/figma/"><i class="icon-tag"></i>figma (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/firebase/"><i class="icon-tag"></i>Firebase (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/fish/"><i class="icon-tag"></i>fish (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/flyfree/"><i class="icon-tag"></i>FlyFree (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/font/"><i class="icon-tag"></i>Font (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/ftp/"><i class="icon-tag"></i>FTP (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/functionallanguage/"><i class="icon-tag"></i>FunctionalLanguage (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/fusion360/"><i class="icon-tag"></i>Fusion360 (8)</a></li>
        <li><a href="https://girigiribauer.com/tags/getusermedia/"><i class="icon-tag"></i>getUserMedia (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/git/"><i class="icon-tag"></i>Git (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/gitconfig/"><i class="icon-tag"></i>gitconfig (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/glsl/"><i class="icon-tag"></i>GLSL (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/golang/"><i class="icon-tag"></i>Golang (4)</a></li>
        <li><a href="https://girigiribauer.com/tags/googleappengine/"><i class="icon-tag"></i>GoogleAppEngine (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/homebrew/"><i class="icon-tag"></i>Homebrew (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/html/"><i class="icon-tag"></i>HTML (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/html5/"><i class="icon-tag"></i>HTML5 (7)</a></li>
        <li><a href="https://girigiribauer.com/tags/html5-outline/"><i class="icon-tag"></i>HTML5-outline (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/https/"><i class="icon-tag"></i>HTTPS (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/hugo/"><i class="icon-tag"></i>Hugo (5)</a></li>
        <li><a href="https://girigiribauer.com/tags/icon-font/"><i class="icon-tag"></i>Icon-Font (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/install/"><i class="icon-tag"></i>Install (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/ionic/"><i class="icon-tag"></i>ionic (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/ios/"><i class="icon-tag"></i>iOS (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/iterm/"><i class="icon-tag"></i>iTerm (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/javascript/"><i class="icon-tag"></i>JavaScript (7)</a></li>
        <li><a href="https://girigiribauer.com/tags/jinja2/"><i class="icon-tag"></i>jinja2 (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/jq/"><i class="icon-tag"></i>jq (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/jquery/"><i class="icon-tag"></i>jQuery (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/jsperf/"><i class="icon-tag"></i>jsperf (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/lint/"><i class="icon-tag"></i>lint (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/linux/"><i class="icon-tag"></i>Linux (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/mediaquery/"><i class="icon-tag"></i>mediaQuery (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/mongodb/"><i class="icon-tag"></i>MongoDB (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/mvc/"><i class="icon-tag"></i>MVC (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/mysql/"><i class="icon-tag"></i>MySQL (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/namespace/"><i class="icon-tag"></i>namespace (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/naming/"><i class="icon-tag"></i>naming (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/nativeapp/"><i class="icon-tag"></i>NativeApp (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/oldie/"><i class="icon-tag"></i>oldIE (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/openapi/"><i class="icon-tag"></i>OpenAPI (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/opengraph/"><i class="icon-tag"></i>OpenGraph (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/output/"><i class="icon-tag"></i>output (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/php/"><i class="icon-tag"></i>PHP (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/plasmo/"><i class="icon-tag"></i>plasmo (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/polyfills/"><i class="icon-tag"></i>polyfills (4)</a></li>
        <li><a href="https://girigiribauer.com/tags/postgresql/"><i class="icon-tag"></i>PostgreSQL (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/preloader/"><i class="icon-tag"></i>preloader (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/python/"><i class="icon-tag"></i>Python (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/rdfa/"><i class="icon-tag"></i>RDFa (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/rsync/"><i class="icon-tag"></i>rsync (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/scala/"><i class="icon-tag"></i>Scala (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/setup/"><i class="icon-tag"></i>Setup (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/shellscript/"><i class="icon-tag"></i>ShellScript (5)</a></li>
        <li><a href="https://girigiribauer.com/tags/slack/"><i class="icon-tag"></i>slack (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/smartphone/"><i class="icon-tag"></i>Smartphone (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/sns/"><i class="icon-tag"></i>SNS (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/ssh/"><i class="icon-tag"></i>SSH (4)</a></li>
        <li><a href="https://girigiribauer.com/tags/static-site-generator/"><i class="icon-tag"></i>Static Site Generator (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/study/"><i class="icon-tag"></i>study (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/svg/"><i class="icon-tag"></i>SVG (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/tmux/"><i class="icon-tag"></i>tmux (5)</a></li>
        <li><a href="https://girigiribauer.com/tags/twitter/"><i class="icon-tag"></i>Twitter (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/vagrant/"><i class="icon-tag"></i>Vagrant (15)</a></li>
        <li><a href="https://girigiribauer.com/tags/viewport/"><i class="icon-tag"></i>viewport (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/vim/"><i class="icon-tag"></i>Vim (5)</a></li>
        <li><a href="https://girigiribauer.com/tags/vimrc/"><i class="icon-tag"></i>vimrc (2)</a></li>
        <li><a href="https://girigiribauer.com/tags/virtualbox/"><i class="icon-tag"></i>VirtualBox (3)</a></li>
        <li><a href="https://girigiribauer.com/tags/virtualization/"><i class="icon-tag"></i>virtualization (7)</a></li>
        <li><a href="https://girigiribauer.com/tags/vscode/"><i class="icon-tag"></i>VSCode (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webapp/"><i class="icon-tag"></i>WebApp (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webaudioapi/"><i class="icon-tag"></i>WebAudioAPI (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webfont/"><i class="icon-tag"></i>WebFont (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webgl/"><i class="icon-tag"></i>WebGL (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webrtc/"><i class="icon-tag"></i>WebRTC (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/webserver/"><i class="icon-tag"></i>WebServer (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/wget/"><i class="icon-tag"></i>wget (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/xcode/"><i class="icon-tag"></i>Xcode (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/yeoman/"><i class="icon-tag"></i>Yeoman (1)</a></li>
        <li><a href="https://girigiribauer.com/tags/zsh/"><i class="icon-tag"></i>Zsh (3)</a></li>
      </ul>

      <h2>Categories</h2>
      <ul class="tags">
        <li><a href="/tech/"><i class="icon-book"></i>tech (106)</a></li>
        <li><a href="/misc/"><i class="icon-book"></i>misc (26)</a></li>
        <li><a href="/biz/"><i class="icon-book"></i>biz (42)</a></li>
        <li><a href="/journey/"><i class="icon-book"></i>journey (0)</a></li>
        <li><a href="https://curry.girigiribauer.com" target="_blank" rel="noreferer"><i
              class="icon-book"></i>カレー（駄文）</a></li>
      </ul>

      <h2>RSS</h2>
      <ul class="tags"><li><a href="https://girigiribauer.com/tech/index.xml"><i class="icon-rss"></i>tech</a></li><li><a href="https://girigiribauer.com/misc/index.xml"><i class="icon-rss"></i>misc</a></li><li><a href="https://girigiribauer.com/biz/index.xml"><i class="icon-rss"></i>biz</a></li>
        <li><a href="/index.xml"><i class="icon-rss"></i>All Articles</a></li>
      </ul>

      <hr>

      <ul>
        <li>このブログは個人の見解であり、所属する組織、団体等の公式見解ではありません</li>
        <li>自分がひっかかった技術的なことをメモってインターネット上に解き放ち、忘れた頃に自分含む誰かがググったときの助けになれば、というポリシーでブログを書いています</li>
        <li>このサイトでは cookie および <a href="https://www.google.com/intl/ja/policies/privacy/partners/"
            target="_blank">Google Analytics を利用しています</a></li>
      </ul>
      <p class="copyright">&copy; ばうあーろぐ</p>
    </footer>
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-36767095-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </div>
</body>

</html>
