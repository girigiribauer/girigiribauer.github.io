{{ define "main" }}

<!-- Projects -->
{{ if .Site.Data.products.enable }}
<section class="section-mb">
    <h2 class="section-title">{{ .Site.Data.products.title }}</h2>
    <div class="projects-list">
        {{ range .Site.Data.products.items }}
        <a href="{{.link}}" target="_blank" rel="noopener" class="project-item project-link">
            <!-- Icon Placeholder (First letter of title if no image) -->
            <div class="project-icon">
                {{ if .image }}
                <img src="{{ .image }}" alt="{{ .title }}" class="project-img">
                {{ else }}
                {{ substr .title 0 1 }}
                {{ end }}
            </div>
            <div class="project-content">
                <h3 class="project-title">{{ .title }}</h3>
                <p class="project-desc">{{ .description }}</p>
            </div>
        </a>
        {{ end }}
    </div>
</section>
{{ end }}

<!-- Recent Blog Posts -->
<section class="section-mb">
    <h2 class="section-title">Latest Posts</h2>
    <div class="blog-list">
        {{/* Filter only "tech" section, limit to 5 */}}
        {{ $posts := where .Site.RegularPages "Section" "tech" }}
        {{ range first 5 $posts.ByDate.Reverse }}
        <article class="article-item">
            <a href="{{ .Permalink }}" class="article-link">
                <h3 class="article-title">{{ .Title }}</h3>
            </a>
            <div class="article-meta">
                <time datetime="{{ .Date }}">{{ .Date.Format "2 Jan 2006" }}</time>
            </div>
            <p class="article-description">{{ .Description | default .Summary | truncate 100 }}</p>
        </article>
        {{ end }}
    </div>

    <div class="view-all-container">
        <a href="/tech" class="view-all-btn">View
            All Posts</a>
    </div>
</section>

{{ end }}
