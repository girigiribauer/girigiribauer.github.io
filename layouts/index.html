{{ define "main" }}

<!-- Products -->
{{ $products := where .Site.RegularPages "Section" "products" }}
{{ if gt (len $products) 0 }}
<section class="section-mb">
    <h2 class="section-title">Products</h2>
    <div class="products-list">
        {{ range $products }}
        <!-- Link to internal detail page -->
        <a href="{{ .RelPermalink }}" class="product-item product-link">
            <!-- Icon -->
            <div class="product-icon">
                {{ $img := .Resources.GetMatch .Params.image }}
                {{ if $img }}
                <img src="{{ $img.RelPermalink }}" alt="{{ .Title }}" class="product-img">
                {{ else }}
                {{ substr .Title 0 1 }}
                {{ end }}
            </div>
            <div class="product-content">
                <h3 class="product-title">{{ .Title }}</h3>
                <p class="product-desc">{{ .Params.description }}</p>
            </div>
        </a>
        {{ end }}
    </div>
</section>
{{ end }}

<!-- Recent Blog Posts -->
<section class="section-mb">
    <h2 class="section-title">Latest Posts</h2>
    <div class="blog-list">
        {{ $posts := where .Site.RegularPages "Section" "tech" }}
        {{ range first 5 $posts.ByDate.Reverse }}
        <article class="article-item">
            <a href="{{ .RelPermalink }}" class="article-link">
                <h3 class="article-title">{{ .Title }}</h3>
            </a>
            <div class="article-meta">
                <time datetime="{{ .Date }}">{{ .Date.Format "2006/01/02" }}</time>
            </div>
            <p class="article-description">{{ .Description | default .Summary | truncate 100 }}</p>
        </article>
        {{ end }}
    </div>

    <div class="view-all-container">
        <a href="/tech" class="view-all-btn">View
            All Posts</a>
    </div>
</section>

{{ end }}
